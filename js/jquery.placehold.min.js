/* Placehold, A plugin for jQuery which replaces empty image sources with dummy images from either placehold.it or flickholdr.com
 * By: Samuel Nystedt, http://samn.se
 * Version: alpha 0.1
 * Updated: January 25th, 2012
 */
(function(f){f.fn.placehold=function(m){var b=f.extend({color:void 0,useFlickr:!1,useCanvas:!1,tags:"",replaceAll:!1},m),k=!1,c,d,g;void 0===b.color&&(k=!0);this.find("img").each(function(m,h){if(""==f(h).attr("src")||""==f(h).attr("data-src")||!0==b.replaceAll)if(c=f(h).attr("width"),d=f(h).attr("height"),void 0!=c&&void 0!=d){if(!0===b.useFlickr&&""!=b.tags)g="http://flickholdr.com/"+c+"/"+d+"/"+b.tags+"/"+parseInt(100*Math.random());else if(!0===b.useFlickr)g="http://flickholdr.com/"+c+"/"+d+"/"+
parseInt(100*Math.random());else if(!0===b.useCanvas){k&&(b.color=Math.floor(16777215*Math.random()));var a=b.color,i,e,l,j;i=document.createElement("canvas");if(void 0!==i){e=i.getContext("2d");i.width=c;i.height=d;e.fillStyle="#"+a.toString(16);e.fillRect(0,0,c,d);l=""+c+"x"+d;a=((a&16711422)>>1).toString(16);5==a.length&&(a="0"+a);4==a.length&&(a="00"+a);e.fillStyle="#"+a.toString(16);e.textBaseline="middle";j=100;e.font="bold "+j+"px sans-serif";for(a=e.measureText(l);a.width>c;)j--,e.font="bold "+
j+"px sans-serif",a=e.measureText(l);e.fillText(""+c+"x"+d,0.5*(c-a.width),0.5*d);g=i.toDataURL()}else g=!1}else k&&(b.color=Math.floor(16777215*Math.random())),g="http://placehold.it/"+c+"x"+d+"/"+b.color;f(h).attr("src",g);void 0!==f(h).attr("data-src")&&f(h).attr("data-src",g)}});return this}})(jQuery);